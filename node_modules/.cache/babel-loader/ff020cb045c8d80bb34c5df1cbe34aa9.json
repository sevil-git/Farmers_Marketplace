{"ast":null,"code":"var checkParameters = require('./precondition');\nvar defaultEncoding = require('./default-encoding');\nvar sync = require('./sync');\nvar Buffer = require('safe-buffer').Buffer;\nvar ZERO_BUF;\nvar subtle = global.crypto && global.crypto.subtle;\nvar toBrowser = {\n  'sha': 'SHA-1',\n  'sha-1': 'SHA-1',\n  'sha1': 'SHA-1',\n  'sha256': 'SHA-256',\n  'sha-256': 'SHA-256',\n  'sha384': 'SHA-384',\n  'sha-384': 'SHA-384',\n  'sha-512': 'SHA-512',\n  'sha512': 'SHA-512'\n};\nvar checks = [];\nfunction checkNative(algo) {\n  if (global.process && !global.process.browser) {\n    return Promise.resolve(false);\n  }\n  if (!subtle || !subtle.importKey || !subtle.deriveBits) {\n    return Promise.resolve(false);\n  }\n  if (checks[algo] !== undefined) {\n    return checks[algo];\n  }\n  ZERO_BUF = ZERO_BUF || Buffer.alloc(8);\n  var prom = browserPbkdf2(ZERO_BUF, ZERO_BUF, 10, 128, algo).then(function () {\n    return true;\n  }).catch(function () {\n    return false;\n  });\n  checks[algo] = prom;\n  return prom;\n}\nfunction browserPbkdf2(password, salt, iterations, length, algo) {\n  return subtle.importKey('raw', password, {\n    name: 'PBKDF2'\n  }, false, ['deriveBits']).then(function (key) {\n    return subtle.deriveBits({\n      name: 'PBKDF2',\n      salt: salt,\n      iterations: iterations,\n      hash: {\n        name: algo\n      }\n    }, key, length << 3);\n  }).then(function (res) {\n    return Buffer.from(res);\n  });\n}\nfunction resolvePromise(promise, callback) {\n  promise.then(function (out) {\n    process.nextTick(function () {\n      callback(null, out);\n    });\n  }, function (e) {\n    process.nextTick(function () {\n      callback(e);\n    });\n  });\n}\nmodule.exports = function (password, salt, iterations, keylen, digest, callback) {\n  if (typeof digest === 'function') {\n    callback = digest;\n    digest = undefined;\n  }\n  digest = digest || 'sha1';\n  var algo = toBrowser[digest.toLowerCase()];\n  if (!algo || typeof global.Promise !== 'function') {\n    return process.nextTick(function () {\n      var out;\n      try {\n        out = sync(password, salt, iterations, keylen, digest);\n      } catch (e) {\n        return callback(e);\n      }\n      callback(null, out);\n    });\n  }\n  checkParameters(password, salt, iterations, keylen);\n  if (typeof callback !== 'function') throw new Error('No callback provided to pbkdf2');\n  if (!Buffer.isBuffer(password)) password = Buffer.from(password, defaultEncoding);\n  if (!Buffer.isBuffer(salt)) salt = Buffer.from(salt, defaultEncoding);\n  resolvePromise(checkNative(algo).then(function (resp) {\n    if (resp) return browserPbkdf2(password, salt, iterations, keylen, algo);\n    return sync(password, salt, iterations, keylen, digest);\n  }), callback);\n};","map":{"version":3,"names":["checkParameters","require","defaultEncoding","sync","Buffer","ZERO_BUF","subtle","global","crypto","toBrowser","checks","checkNative","algo","process","browser","Promise","resolve","importKey","deriveBits","undefined","alloc","prom","browserPbkdf2","then","catch","password","salt","iterations","length","name","key","hash","res","from","resolvePromise","promise","callback","out","nextTick","e","module","exports","keylen","digest","toLowerCase","Error","isBuffer","resp"],"sources":["F:/Farmers_Marketplace1/node_modules/pbkdf2/lib/async.js"],"sourcesContent":["var checkParameters = require('./precondition')\r\nvar defaultEncoding = require('./default-encoding')\r\nvar sync = require('./sync')\r\nvar Buffer = require('safe-buffer').Buffer\r\n\r\nvar ZERO_BUF\r\nvar subtle = global.crypto && global.crypto.subtle\r\nvar toBrowser = {\r\n  'sha': 'SHA-1',\r\n  'sha-1': 'SHA-1',\r\n  'sha1': 'SHA-1',\r\n  'sha256': 'SHA-256',\r\n  'sha-256': 'SHA-256',\r\n  'sha384': 'SHA-384',\r\n  'sha-384': 'SHA-384',\r\n  'sha-512': 'SHA-512',\r\n  'sha512': 'SHA-512'\r\n}\r\nvar checks = []\r\nfunction checkNative (algo) {\r\n  if (global.process && !global.process.browser) {\r\n    return Promise.resolve(false)\r\n  }\r\n  if (!subtle || !subtle.importKey || !subtle.deriveBits) {\r\n    return Promise.resolve(false)\r\n  }\r\n  if (checks[algo] !== undefined) {\r\n    return checks[algo]\r\n  }\r\n  ZERO_BUF = ZERO_BUF || Buffer.alloc(8)\r\n  var prom = browserPbkdf2(ZERO_BUF, ZERO_BUF, 10, 128, algo)\r\n    .then(function () {\r\n      return true\r\n    }).catch(function () {\r\n      return false\r\n    })\r\n  checks[algo] = prom\r\n  return prom\r\n}\r\n\r\nfunction browserPbkdf2 (password, salt, iterations, length, algo) {\r\n  return subtle.importKey(\r\n    'raw', password, {name: 'PBKDF2'}, false, ['deriveBits']\r\n  ).then(function (key) {\r\n    return subtle.deriveBits({\r\n      name: 'PBKDF2',\r\n      salt: salt,\r\n      iterations: iterations,\r\n      hash: {\r\n        name: algo\r\n      }\r\n    }, key, length << 3)\r\n  }).then(function (res) {\r\n    return Buffer.from(res)\r\n  })\r\n}\r\n\r\nfunction resolvePromise (promise, callback) {\r\n  promise.then(function (out) {\r\n    process.nextTick(function () {\r\n      callback(null, out)\r\n    })\r\n  }, function (e) {\r\n    process.nextTick(function () {\r\n      callback(e)\r\n    })\r\n  })\r\n}\r\nmodule.exports = function (password, salt, iterations, keylen, digest, callback) {\r\n  if (typeof digest === 'function') {\r\n    callback = digest\r\n    digest = undefined\r\n  }\r\n\r\n  digest = digest || 'sha1'\r\n  var algo = toBrowser[digest.toLowerCase()]\r\n\r\n  if (!algo || typeof global.Promise !== 'function') {\r\n    return process.nextTick(function () {\r\n      var out\r\n      try {\r\n        out = sync(password, salt, iterations, keylen, digest)\r\n      } catch (e) {\r\n        return callback(e)\r\n      }\r\n      callback(null, out)\r\n    })\r\n  }\r\n\r\n  checkParameters(password, salt, iterations, keylen)\r\n  if (typeof callback !== 'function') throw new Error('No callback provided to pbkdf2')\r\n  if (!Buffer.isBuffer(password)) password = Buffer.from(password, defaultEncoding)\r\n  if (!Buffer.isBuffer(salt)) salt = Buffer.from(salt, defaultEncoding)\r\n\r\n  resolvePromise(checkNative(algo).then(function (resp) {\r\n    if (resp) return browserPbkdf2(password, salt, iterations, keylen, algo)\r\n\r\n    return sync(password, salt, iterations, keylen, digest)\r\n  }), callback)\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}